"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GetCartByIdUseCase = void 0;
const CheckoutResponse_1 = require("../Response/CheckoutResponse");
const CheckoutUnauthorizedError_1 = require("../Error/CheckoutUnauthorizedError");
class GetCartByIdUseCase {
    constructor(getCartByIdService) {
        this.getCartByIdService = getCartByIdService;
    }
    async execute(session) {
        if (session.has("cartId")) {
            const cartId = String(session.get("cartId"));
            const cart = await this.getCartByIdService.execute(cartId);
            return new CheckoutResponse_1.CheckoutResponse(cart);
        }
        else {
            throw new CheckoutUnauthorizedError_1.CheckoutUnauthorizedError("No cartId found");
        }
    }
}
exports.GetCartByIdUseCase = GetCartByIdUseCase;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2V0Q2FydEJ5SWRVc2VDYXNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL1R4QmxvZy9BcHBsaWNhdGlvbi9DYXJ0L1VzZUNhc2UvR2V0Q2FydEJ5SWRVc2VDYXNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG1FQUE4RDtBQUU5RCxrRkFBNkU7QUFHN0UsTUFBYSxrQkFBa0I7SUFHM0IsWUFDSSxrQkFBc0M7UUFFdEMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLGtCQUFrQixDQUFDO0lBQ2pELENBQUM7SUFFTSxLQUFLLENBQUMsT0FBTyxDQUNoQixPQUFnQjtRQUVoQixJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDdkIsTUFBTSxNQUFNLEdBQVcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNyRCxNQUFNLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFM0QsT0FBTyxJQUFJLG1DQUFnQixDQUN2QixJQUFJLENBQ1AsQ0FBQztTQUNMO2FBQU07WUFDSCxNQUFNLElBQUkscURBQXlCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztTQUMxRDtJQUNMLENBQUM7Q0FDSjtBQXZCRCxnREF1QkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NoZWNrb3V0UmVzcG9uc2V9IGZyb20gXCIuLi9SZXNwb25zZS9DaGVja291dFJlc3BvbnNlXCI7XG5pbXBvcnQge0dldENhcnRCeUlkU2VydmljZX0gZnJvbSBcIi4uLy4uLy4uL0RvbWFpbi9DYXJ0L1NlcnZpY2UvR2V0Q2FydEJ5SWRTZXJ2aWNlXCI7XG5pbXBvcnQge0NoZWNrb3V0VW5hdXRob3JpemVkRXJyb3J9IGZyb20gXCIuLi9FcnJvci9DaGVja291dFVuYXV0aG9yaXplZEVycm9yXCI7XG5pbXBvcnQge1Nlc3Npb259IGZyb20gXCIuLi8uLi8uLi8uLi9jb3JlL3Nlc3Npb24vU2Vzc2lvblwiO1xuXG5leHBvcnQgY2xhc3MgR2V0Q2FydEJ5SWRVc2VDYXNlIHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IGdldENhcnRCeUlkU2VydmljZTogR2V0Q2FydEJ5SWRTZXJ2aWNlO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGdldENhcnRCeUlkU2VydmljZTogR2V0Q2FydEJ5SWRTZXJ2aWNlLFxuICAgICkge1xuICAgICAgICB0aGlzLmdldENhcnRCeUlkU2VydmljZSA9IGdldENhcnRCeUlkU2VydmljZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZXhlY3V0ZShcbiAgICAgICAgc2Vzc2lvbjogU2Vzc2lvbixcbiAgICApOiBQcm9taXNlPENoZWNrb3V0UmVzcG9uc2U+IHtcbiAgICAgICAgaWYgKHNlc3Npb24uaGFzKFwiY2FydElkXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBjYXJ0SWQ6IHN0cmluZyA9IFN0cmluZyhzZXNzaW9uLmdldChcImNhcnRJZFwiKSk7XG4gICAgICAgICAgICBjb25zdCBjYXJ0ID0gYXdhaXQgdGhpcy5nZXRDYXJ0QnlJZFNlcnZpY2UuZXhlY3V0ZShjYXJ0SWQpO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3IENoZWNrb3V0UmVzcG9uc2UoXG4gICAgICAgICAgICAgICAgY2FydCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tvdXRVbmF1dGhvcml6ZWRFcnJvcihcIk5vIGNhcnRJZCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdfQ==